\include{settings}

\begin{document}

\include{titlepage}

\tableofcontents
\newpage

\section{Цель работы}

Исследовать возможности анализаторов трафика на примере бесплатного и свободно распространяемого инструмента WireShark.

\vspace{-0.5em}
\section{Программа работы}

\begin{enumerate}
	\item Создание GPG ключа на одном и импорт публичного ключа на другом устройстве.
	\item Подпись текстового сообщения на одном устройстве и проверка его подлинности на другом компьютере.
	\item Шифрование текстового сообщения на одном компьютере публичным ключом другого компьютера и его расшифровка.
\end{enumerate}

\vspace{-0.5em}
\section{Сведения о компьютерах}

Для вывода информации о используемых в процессе выполнения работы системах используем утилиту \code{uname}:
\lstinputlisting{uname1.txt}

\lstinputlisting{uname2.txt}

На компьютере №1 (\code{turing}) установлена ОС Ubuntu 18.04, а на компьютере №2 (\code{torvalds}) ОС Manjaro 18.0.

\vspace{-0.5em}
\section{Выполнение работы}

\subsection{PGP и GnuPG}

\textbf{PGP} (Pretty Good Privacy) -- компьютерная программа, также библиотека функций, позволяющая выполнять операции шифрования и цифровой подписи сообщений, файлов и другой информации, представленной в электронном виде, в том числе прозрачное шифрование данных на запоминающих устройствах, например, на жёстком диске.

К 1997 году PGP уже широко использовалась во всём мире и многие хотели создавать собственное ПО, совместимое с PGP 5. В 1997 году PGP Inc. предложила IETF-стандарт, названный \textbf{OpenPGP}. В IETF были созданы стандарты RFC 2440 (1998 год) и RFC 4880 (2007 год). В 1999 году силами Фонда свободного программного обеспечения (Free Software Foundation, FSF) была создана свободная реализация OpenPGP под названием GNU Privacy Guard.

\textbf{GnuPG} (GNU Privacy Guard, GPG) -- свободная программа для шифрования информации и создания электронных цифровых подписей. Разработана как альтернатива PGP и выпущена под свободной лицензией GNU General Public License. GPG может использоваться для симметричного шифрования, но в основном программа используется для ассиметричного шифрования информации.

Шифры используемые в GnuPG:

\begin{itemize}
	\item Симметричные шифры: IDEA, 3DES, CAST5, Blowfish, AES, AES192, AES256, Twofish
	\item Алгоритмы с открытым ключом: RSA, ElGamal, DSA
	\item Хэш-функции: MD5, SHA1, RIPEMD160, SHA256, SHA384, SHA512
\end{itemize}

\subsection{Генерация GPG ключей}

С помощью команды \code{gpg --full-generate-key} сгенерируем ключ:

\lstinputlisting{generate.txt}

Ключ длиной 4096 бит был сгенерирован с использованием алгоритма шифрования RSA. Был установлена дата истечения ключа: 10 июня 2019 года.

Для передачи публичного ключа второму устройству его необходимо экспортировать с помощью ключа \code{-{}-export}. Для наглядности воспользуемся опцией \code{-{}-armor} -- экспорт ключа в текстовом формате.

\lstinputlisting{export.txt}

Передадим этот файл второму устройству и импортируем с помощью ключа \code{-{}-import}.

\lstinputlisting{import.txt}

Видно, что ключ был успешно импортирован. После этого ключу был присвоен уровень доверия со значением 5 при помощи интерактивного меню.

\lstinputlisting{trust.txt}

\subsection{Подпись текстового сообщения}

На устройстве, на котором был сгенерирован ключ, создадим текстовый файл \code{message.txt} и подпишем его при помощи ключа \code{-{}-detach-sign}, который подписывает файл и сохраняет подпись в отдельный файл. Для наглядности оставим опцию \code{-{}-armor}. 

\lstinputlisting{sign.txt}

Передадим текстовый файл и сгенерированную подпись на второе устройство и проверим сначала исходный файл, а потом файл, в который были внесены изменения.

\lstinputlisting{verify.txt}

Видно, что файл, в котором не было изменений, был успешно проверен. После дозаписи в файл проверка проваливается. 

\subsection{Ассиметричное шифрование текстового сообщения}

Создадим на втором устройстве текстовый файл \code{encrypted\_text.txt} и зашифруем его с помощью опции \code{-{}- encrypt} открытым ключом первого устройства. После ключа \code{-{}-recipient} указывается получатель сообщения. Для наглядности оставим ключ \code{-{}-armor}. 

\lstinputlisting{encrypt.txt}

Передадим зашифрованное сообщение на первое устройство и расшифруем его.

\lstinputlisting{decrypt.txt}

Видно, что исходное сообщение было успешно расшифровано с помощью закрытого ключа.

\section{Выводы}

В ходе выполнения данной работы:

\begin{itemize}
	\item получены навыки работы с утилитой \code{GnuPG};
	\item закреплены знания о несимметричном шифровании;
	\item рассмотрена на практике генерация и проверка электронной подписи;
	\item изучены возможности шифрования сообщений при помощи публичного ключа и дешифрации при помощи закрытого. 
\end{itemize}

\section*{Список использованных источников}

\begin{enumerate}
	\item Шифры используемые в GnuPG / OpenNET [Электронный ресурс]:\\
	URL: {\small\url{https://www.opennet.ru/docs/RUS/gph/ch02s07.html}}
	\item Используем GPG для шифрования сообщений и файлов / Хабр [Электронный ресурс]:\\
		URL: {\small\url{https://habr.com/post/358182/}}
	\item Exchanging keys \ The GNU Privacy Handbook [Электронный ресурс]:\\
		URL: {\small\url{https://www.gnupg.org/gph/en/manual/x56.html}}
\end{enumerate}

\section*{Дополнения к отчету}

\subsection*{Симметричное шифрование текстового сообщения}

Зашифруем сообщение утилитой GnuPG при помощи симметричного шифрования. Для этого добавим флаг \code{-{}-symmetric} и укажем алгоритм Blowfish при помощи флага \code{-{}-cipher-algo} (по умолчанию \code{AES256}). При шифровании была введена секретная фраза: <<pass>>. Для наглядности оставим ключ \code{-{}-armor}. 

\lstinputlisting{sym_encrypt.txt}

Передадим зашифрованное сообщение на второе устройство и расшифруем его, введя во всплывающее окно секретную фразу.

\lstinputlisting{sym_decrypt.txt}

Видно, что в первый раз был введен неверный секретный ключ, а во второй раз соощение было успешно расшифровано.

\end{document}
